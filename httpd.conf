<VirtualHost *:80>
    ServerAdmin hostmaster@occams.info
    DocumentRoot /home/popvox/www_popvox_com/httproot
    ServerName www.popvox.com
    
    ErrorLog /home/popvox/logs/error_log
    CustomLog /home/popvox/logs/access_log combined

    Alias /blog /home/popvox/www_popvox_com/httproot/blog
    Alias /media/ /home/popvox/www_popvox_com/media/
    Alias /favicon.ico /home/popvox/www_popvox_com/media/favicon.ico

    WSGIDaemonProcess popvox
    WSGIProcessGroup popvox
    WSGIScriptAlias / /home/popvox/www_popvox_com/django.wsgi
    #WSGIRestrictStdout Off

    <LocationMatch ^/home|^/bills|^/orgs|^/accounts>
        AuthType Basic
        AuthName "Private Beta"
        AuthUserFile /home/popvox/htpasswd
        Require user demo
    </LocationMatch>
</VirtualHost>

<VirtualHost 72.249.66.163:443>
    SSLEngine On
    SSLCertificateFile /etc/ssl/local/www_popvox_com.crt
    SSLCertificateKeyFile /etc/ssl/local/www_popvox_com.key

    ServerAdmin hostmaster@occams.info
    DocumentRoot /home/popvox/www_popvox_com/httproot
    ServerName www.popvox.com
    
    ErrorLog /home/popvox/logs/error_log
    CustomLog /home/popvox/logs/access_log combined

    Alias /blog /home/popvox/www_popvox_com/httproot/blog
    Alias /media/ /home/popvox/www_popvox_com/media/
    Alias /favicon.ico /home/popvox/www_popvox_com/media/favicon.ico
    Alias /admin_media/ /usr/share/pyshared/django/contrib/admin/media/

    WSGIDaemonProcess popvox_ssl
    WSGIProcessGroup popvox_ssl
    #WSGIScriptAlias / /home/popvox/www_popvox_com/django.wsgi
    WSGIScriptAlias /admin /home/popvox/www_popvox_com/admin/django.wsgi

    <LocationMatch ^/home|^/bills|^/orgs|^/accounts>
        AuthType Basic
        AuthName "Private Beta"
        AuthUserFile /home/popvox/htpasswd
        Require user demo
    </LocationMatch>

    <Directory /home/popvox/www_popvox_com/admin>
        SSLVerifyClient require
        SSLVerifyDepth 1
        SSLCACertificateFile /etc/ssl/local/server.crt
    </Directory>
</VirtualHost>

<VirtualHost *:80>
    # This virtual host redirects alternate domain
    # names to our canonical name.
	
    ServerAdmin hostmaster@occams.info
    DocumentRoot /home/popvox/www_popvox_com/httproot
    ServerName popvox.com
    ServerAlias thevoxpop.us
    ServerAlias www.thevoxpop.us
    ServerAlias popvox.net
    ServerAlias www.popvox.net
    
    ErrorLog /home/popvox/logs/error_log
    CustomLog /home/popvox/logs/access_log combined
    
    Redirect / http://www.popvox.com/
</VirtualHost>

<VirtualHost *:80>
    # This is a development, password-protected branch.
	
    ServerAdmin hostmaster@occams.info
    DocumentRoot /home/popvox/www_popvox_com/httproot
    ServerName demo.popvox.com
    
    ErrorLog /home/popvox/logs/dev_error_log
    CustomLog /home/popvox/logs/dev_access_log combined

    Alias /media/ /home/popvox/www_popvox_com/media/
    Alias /favicon.ico /home/popvox/www_popvox_com/media/favicon.ico
    Alias /admin_media/ /usr/share/pyshared/django/contrib/admin/media/

    WSGIDaemonProcess popvox_demo
    WSGIProcessGroup popvox_demo
    WSGIScriptAlias / /home/popvox/www_popvox_com/django.wsgi
    #WSGIRestrictStdout Off

    <Location />
        AuthType Basic
        AuthName "Private Beta"
        AuthUserFile /home/popvox/htpasswd
        Require user demo
    </Location>
</VirtualHost>

<VirtualHost *:80>
    # This is a development, password-protected branch.
	
    ServerAdmin hostmaster@occams.info
    DocumentRoot /home/popvox/dev_popvox_com/httproot
    ServerName dev.popvox.com
    
    ErrorLog /home/popvox/logs/dev_error_log
    CustomLog /home/popvox/logs/dev_access_log combined

    Alias /media/ /home/popvox/dev_popvox_com/media/
    Alias /favicon.ico /home/popvox/dev_popvox_com/media/favicon.ico
    Alias /admin_media/ /usr/share/pyshared/django/contrib/admin/media/

    WSGIDaemonProcess popvox_dev
    WSGIProcessGroup popvox_dev
    WSGIScriptAlias / /home/popvox/dev_popvox_com/django.wsgi
    #WSGIRestrictStdout Off

    <Location />
        AuthType Basic
        AuthName "Private Beta"
        AuthUserFile /home/popvox/htpasswd
        Require user dev
    </Location>
</VirtualHost>

<VirtualHost *:80>
    ServerAdmin hostmaster@occams.info
    DocumentRoot /home/popvox/www_popvox_com/httproot
    ServerName g.popvox.com
    
    ErrorLog /home/popvox/logs/error_log
    CustomLog /home/popvox/logs/access_log combined
    
    Redirect / http://mail.g.popvox.com
</VirtualHost>
