{% extends "master.html" %}
{% block title %}POPVOX - District Info{% endblock %}
{% block title2 %}{% endblock %}
{% block description %}Information about individual congressional districts{% endblock %}
{% block content %}
<script type="text/javascript" src="/media/js/highcharts.js"></script>
<script type="text/javascript" src="/media/js/charts.js"></script>


<div class="content district-info">

<div class="col_12 col_top col_last">
<h1 class="rule_btm">District Info / {{state}}-{{district}}</h1>
<div class="stats">
	<h2>Facts &amp; Figures</h2>
	{% for member in members %}
		<div class="rep media">
			<div class="img">
				<img src="/static/member_photos/{{member.id}}-100px.jpeg" alt="{{member.name}}" width="65" height="80" />
			</div>
			<div class="bd">
			<p>{{member.name}}</p>
			</div>
		</div>
	{% empty %}
		<h3>No members :( </h2>
	{% endfor %}
	
	<div class="census">
    {% if census_data %}
        <div class="pop">
			<dl>
				<dt>Population</dt>
				<dd><span class="digits">{{census_data.population}}</span></dd>
			</dl>
		</div>
        <div class="sex"><div class="bar-fake-graph"><div class="y-chromosome" style="width: {{census_data.male}}%"></div></div>
		<dl class="male">
			<dt>Male</dt>
			<dd><span class="digits">{{census_data.male}}%</span></dd>
		</dl>
        <dl class="female">
			<dt>Female</dt>
			<dd><span class="digits">{{census_data.female}}%</span></dd>
		</dl>
		</div>
        <div class="age">
			<dl>
				<dt>Median Age</dt>
				<dd><span class="digits">{{census_data.age}}</span> <span class="units">years old</span></dd>
			<dl>
		</div>
        <div class="race"><p>Hispanic or Latino: {{census_data.latino}}%</p>
        <p>White: {{census_data.white}}%</p>
        <p>Black: {{census_data.black}}%</p>
        <p>American Indian: {{census_data.ai}}%</p>
        <p>Asian: {{census_data.asian}}%</p>
        <p>Hawaiian/Pacific Islander: {{census_data.hpi}}%</p>
        <p>Other Races: {{census_data.other}}%</p>
        <p>Biracial: {{census_data.biracial}}%</p></div>
        <div class="edu">
			<dl>
				<dt>Education</dt>
				<dd><p><span class="digits">{{census_data.hs}}%</span> <span class="units">High School</span></p>
			        <p><span class="digits">{{census_data.bachelor}}%</span> <span class="units">Bachelor's</span></p></div>
        <div class="mil">
			<dl>
				<dt>Veterans</dt>
				<dd><span class="digits">{{census_data.veteran}}%</span></dd>
			</dl>
		</div>
        <div class="income">
			<dl>
				<dt>Median income</dt>
				<dd><span class="digits">${{census_data.income}}</span></dd>
			</dl>
		</div>
        <div class="residence section">
			<dl class="urban">
				<div class="bar-fake-graph"><div class="urban" style="width: {{census_data.urban}}%"></div></div>
				<dt>Urban</dt>
				<dd><span class="digits">{{census_data.urban}}%</span></dd>
			</dl>
	        <dl class="rural">
				<dt>Rural</dt>
				<dd><span class="digits">{{census_data.rural}}%</span></dd>
			</dl>
		</div>
    {% else %}
        <h3>No district statistics available. :(</p>
    {% endif %}
	</div><!-- end census info -->
	</div><!--end stats -->

<div class="district-legislation">
	<div class="legislation-tabs">
	   <h4 class="active"><a href="#">Trending</a></h4>
	   <h4 class="inactive"><a href="#popular">Popular</a></h4>
	</div>
	<div style="clear:both"></div><!-- end legislation-tabs -->
	<div class="legislation-trending">
		<p class="subhead">Bills with recent activity in {{ state }}'s District {{ district }}</p>
		<ul>
		{% for billrec,pro,con in trending_bills %}
				<li class="bill {% if billrec.pos == "+" %}endorsed{% endif %} {% if billrec.pos == "-" %}opposed{% endif %}">
					<p class="number">{{ forloop.counter }}</p>
			{% comment %}{% ifchanged %}<p class="commented?">in the last {{billrec.bill.trending_time_period}}</p>{% endifchanged %}{% endcomment %}

			{% with billrec.bill as bill %}

			<h5><a href="{{billrec.bill.url}}">{{ billrec.bill.nicename|truncatewords:12 }}</a></h5>
			{% if pro or con %}
			        <div id="trending_bar_{{forloop.counter}}"><script>bill_bar_chart("trending_bar_{{forloop.counter}}", {{pro|floatformat}}, {{con|floatformat}}, { bg: "#D4D1CA", nopad: true });</script></div>
					{% else %}
					<p>Too few constituents in this district have commented on {{bill.shortname}} to display statistics. <br /> For comments left so far <a href="{{bill.url}}/report">View report.</a></p>
					{% endif %}

			{% if billrec.bill.new_positions < 50 %}
				<p class="trend">This {{ bill.type }} has been trending for the last {{billrec.bill.trending_time_period}}!</p>
			{% else %}
				<p class="trend">{{billrec.bill.new_positions}} users</p>
			{% endif %}
		
			{% if billrec.pos == "" %}
				<a class="action" href="{{bill.url}}">add comment</a>
			{% endif %}

	        {% endwith %}
	        </li>
	{% empty %}
	<h3>Nothing trending :(</h3>
	{% endfor %}
	</ul>
	</div><!---end trending legislation -->
	<div class="legislation-pop" id="popular">
	    <h3>Popular</h3>
		<p class="subhead">Bills with the most activity in {{ state }}'s District {{ district }}</p>
	    {% for bill,pro,con in popular_bills %}
	<ol>
	        <li class="bill">
	        <h5><a href="{{bill.url}}">{{bill.billnumber}} {{ bill.nicename|truncatewords:12 }}</a></h5>
			{% if pro or con %}
			        <div id="popular_bar_{{forloop.counter}}"><script>bill_bar_chart("popular_bar_{{forloop.counter}}", {{pro|floatformat}}, {{con|floatformat}}, { bg: "#D4D1CA", nopad: true });</script></div>
					{% else %}
					<p>Too few constituents in this district have commented on {{bill.shortname}} to display statistics. <br /> For comments left so far <a href="{{bill.url}}/report">View report.</a></p>
					{% endif %}

	        {% if bill.streetname %}<p>(&quot;{{bill.streetname}}&quot;)</p>{% endif %}
	        </li>
	</ol>
	{% empty %}
	<h4>Nothing trending :(</h4>
	{% endfor %}
	</div><!--end popular legislation -->
	</div><!-- end district-legislation -->
</div><!-- end col_9 col_top col_last -->

{% endblock %}
