{% extends "master.html" %}
{% load adserver_tags %}
{% block title %}POPVOX Frequently Asked Questions{% endblock %}
{% block title2 %}{% endblock %}
{% block description %}Learn about how POPVOX works through frequently asked questions.{% endblock %}
{% block head %}
<style>
	.active {
		font-weight: bold;
		}
	
	#searchbox.error {
		color: red;
		}
		
.faq .col_9 {
	padding-top: 0;
	}
	
.faq_item {
	border-top: 1px solid #a7a599;
	padding-bottom: 15px;
	}	

.faq h1 {
	background: url("/media/master/bg_rule.gif") repeat-x left bottom;
	}
	
.faq h2 {
	font: normal 28px/28px 'BebasNeueRegular', helvetica, arial, sans-serif;
	padding: 20px 0 10px 60px;
	border-top: 1px solid #a7a599;
	background-position: left center;
	background-repeat: none;
	}
	
	.faq h2.c_bills	{
		background: url(bg_icon_privacy.png) left top no-repeat;
		}
		
	.faq h2.c_orgs	{
		background: url(bg_icon_privacy.png) left center no-repeat;
		}

	.faq h2.c_first {
		border-top: 0;
		padding: 12px 0 20px 60px;
		background-position-x: top;
		}

.faq h3 {
	font: bold 18px/24px helvetica,arial,sans-serif;
	text-transform: none;
	color: #404045;
	background: none;
	margin: 20px 0 10px;
	padding: 0;
	}
	
#search_faq {
	display: block;
	float: right;
	height: 42px;
	width: 215px;
	background: #d4d1ca;
	}

	#search_faq input {
		border: 1px solid #b0aea3;
		border-radius: 12px;
		-moz-border-radius: 12px;
		-webkit-border-radius: 12px;
		-khtml-border-radius: 12px;
		background: #fff url(bg_mag.png) 160px center no-repeat;
		margin: 10px 15px;
		padding: 3px 10px;
		width: 160px;
		}
		

.faq .img_r {
	border: 2px solid #CC6A11;
	margin: 0 0 10px 15px;
	}
	
.faq .b_expand, .faq .b_collapse {
	float: right;
	font-weight: bold;
	font-size: 11px;
	padding: 1px 5px;
	height: 16px;
	}
	
	.faq .b_expand:hover, .faq .b_collapse:hover {
		color: #fff;
		background: #CC6A11;
		cursor: pointer;
		}
		
.faq .tags {
	clear: both;
	margin-top: -5px;
	}

.faq .tags li {
	float: left;
	margin: 0 3px 3px 0;
	padding: 3px;
	background: #CC6A11;
	color: #fff;
	font: bold 11px/11px helvetica, arial, sans-serif;
	cursor: pointer;
	}			


/* faq col_right */

/* temp */
			.faq .ad {				
				background: #d4d1ca;
				/*height: 66px;*/
				margin-bottom: 15px;
				}
				
			.faq .item {
				display: none;
				}
	
.faq .sub {
	background: #d4d1ca;
	margin-bottom: 15px;
	}
	
	.faq .sub h2 {
		font: bold 18px/18px helvetica, arial, sans-serif;
		text-transform: uppercase;
		margin: 0 0 10px;
		padding: 0;
		border: 0;
		}

	.faq .sub ul li {
		line-height: 13px;
		}
		
		.faq .sub li a {
			color: #CC6A11;
			font-weight: bold;
			}
	
			.faq .sub li.active a {
				border: 1px solid #CC6A11;
				padding: 2px 10px;
				-moz-border-radius: 12px;
				-webkit-border-radius: 12px;
				-khtml-border-radius: 12px;
				border-radius: 12px;
				}
				
	#tags li {
		margin: 8px 0;
		height: 13px;
		text-transform: lowercase;
		}
		
	#tags li a {
		margin: 0 0 3px 0;
		padding: 3px;
		background: #CC6A11;
		color: #fff;
		font: bold 11px/11px helvetica, arial, sans-serif;
		}
		
</style>
<script>
	function populate_categories_tags() {
		$('.faq_category').each(function() {
			var tag = $("<li/>");
			var tag_a = $("<a href=\"#\"/>");
			var tag_n = $("<span class=\"name\"/>");
			var tag_s = $("<span/>");
			tag.append(tag_a);
			tag_a.append(tag_n);
			tag_n.text($(this).find("h2").text());
			tag_a.append(tag_s);
			tag_s.text(" (" + $(this).find(".faq_item").length + ")");
			$('#categories').append(tag);
			tag_a.click(function(e) { return show_cat_tag('categories', tag); });
		});
		
		var all_tags = { };
		var tag_count_max = 0;
		
		$('.faq_item ul.tags li').each(function() {
			var tag = $(this).text();
			if (!all_tags[tag]) all_tags[tag] = 0;
			all_tags[tag] += 1;
			tag_count_max = Math.max(all_tags[tag], tag_count_max);
		});
		
		// write out tags in descending order of number of questions with that tag
		for (var i = tag_count_max; i > 0; i--) {
			for (var j in all_tags) {
				if (all_tags[j] == i) {
					var f = function() {
						var tag = $("<li/>");
						var tag_a = $("<a href=\"#\"/>");
						var tag_n = $("<span class=\"name\"/>");
						var tag_s = $("<span/>");
						tag.append(tag_a);
						tag_a.append(tag_n);
						tag_a.append(tag_s);
						tag_n.text(j);
						tag_s.text(" (" + all_tags[j] + ")");
						$('#tags').append(tag);
						tag_a.click(function(e) { return show_cat_tag('tags', tag); });
					}();
				}
			}
		}
	}
	
	function show_cat_tag(cattag, item) {
		var is_active = item.hasClass("active");
		$('#' + cattag + ' li').removeClass("active");
		item.toggleClass("active", !is_active);
		do_search();
		return false;
	}
	
	function do_search(count_only) {
		// If no items match the result, don't hide them all. Just
		// indicate an error.
		if (!count_only) {
			if (!do_search(true)) {
				$('#searchbox').addClass("error")
				return false;
			}
			
			$('#searchbox').removeClass("error")
		}
		
		// hide and show each faq item
		var q = $('#searchbox').hasClass("default") ? "" : $('#searchbox').val().toLowerCase();
		var cat = $('#categories .active a span.name').text();
		var tag = $('#tags .active a span.name').text();
		
		var has_any_item = false;
		
		$('.faq_category').each(function() {
			var has_item = false; 
			$(this).find('.faq_item').each(function() {
					var matches_tag = false;
					$(this).find('ul.tags li').each(function() {
						if (tag == $(this).text()) matches_tag = true; 
					});
							
					var show =
						      (q == "" || $(this).text().toLowerCase().indexOf(q) >= 0)
						&& (cat == "" || $(this.parentNode).find("h2").text() == cat)
						&& (tag == "" || matches_tag)
						;
					if (show) has_item = true;
					if (!count_only) $(this).toggle(show);
					return 0;
			});
			if (!count_only) $(this).toggle(has_item);
			if (has_item) has_any_item = true;
		});
		
		if (!count_only) {
			$('h2').removeClass('c_first');
			$('h2:visible:first').addClass('c_first');
		}
		
		return has_any_item;
	}
	
	$(function() {
			populate_categories_tags();
			
			$('#searchbox').input_default("search faq");
			$('#searchbox').textchange(function() { do_search(false); });
			
			$('h2:first').addClass('c_first');
			
			$('.faq_item').each(function() {
					var p = $(this).find('p');
					if (p.length > 1) {
						$(p[0]).append('<a class="b_expand">read more [+]</a>');
						$(p[p.length-1]).append('<a class="b_collapse">collapse [-]</a>');
						$('.faq_item').find('p:not(:first)').hide();
					}
			});
			
			$('.b_expand').each(function() {
				var node = this;
				$(node).click(function() {
					$(node).fadeOut();
					$(node.parentNode.parentNode).find('p').fadeIn();
				});
			});

			$('.b_collapse').each(function() {
				var node = this;
				$(node).click(function() {
					$(node.parentNode.parentNode).find('p:not(:first)').fadeOut();
					$(node.parentNode.parentNode).find('.b_expand').fadeIn();
				});
			});
			
			$('.tags li').each(function() {
				$(this).click(function() {
					var tag = $(this).text();
					$('#tags li a').each(function() {
						if ($(this).find('span.name').text() == tag)
							$(this).click();
					});
				});
			});
	});
	
</script>
{% endblock %}
{% block content %}

<div class="content">
<div class="col_12 col_top faq">

	<div class="col_9">
		
		<h1>Frequently Asked Questions</h1>

		<div id="search_faq">
			<form onsubmit="return false;">
				<input id="searchbox" type="text" />
			</form>
		</div>

		<div class="faq_category">
			
			<h2 class="c_bills">About Bills in Congress</h2>
			
			<div class="faq_item">
				<a name="billtitles"><h3>Where do the bill titles come from? Some seem so biased.</h3></a>
				<img class="img_r" src="/media/master/faq_thumb.jpg" alt="faq_thumb" width="102" height="71" />
				<p>The titles listed on each bill page are the official titles of the legislation.  The Congressional sponsor of the bill picks the bill's title.  Some official titles are short and sound like a traditional title (i.e., the “Fairness in Taxation Act”) while others are long descriptions of what the bill actually does: "S. 797: A bill to amend the Fair Labor Standards Act of 1938 to provide more effective remedies to victims of discrimination in the payment of wages on the basis ...", (commonly known as the <a href="/bills/us/112/s797">Paycheck Fairness Act</a>.)</p>
				<p>Remember the 2010 Tax Cut Extension? Well, officially, it was “the Senate amendment to the House amendment to the Senate amendment to H.R. 4853.″ Seriously. (See http://www.popvox.com/blog/2010/12/16/the-tax-cut-extension-or-senate-amendment-to-the-house-amendment-to-the-senate-amendment-to-h-r-4853/)</p>
				<p>For confusing, long-winded titles like these, POPVOX may display a popular “street” name for the bill instead. The street name comes either from Congress’s own research team, the Congressional Research Service, or a tag assigned by the POPVOX team based on use in the media or by the public. Our tagging system is still a work in progress, and we will unveil new search tools soon.</p>
				<ul class="tags">
					<li>tag 1</li>
					<li>tag 2</li>
					<li>tag 3</li>
				</ul><div class="clear"> </div>
			</div> <!-- end of item -->
		</div> <!-- end of category -->
	</div>
	
	<div class="col_3 col_last col_top">
		
		<div class="ad">{% show_ad std180x150 "rightbar_slot1" %}</div>
		
		<div class="sub">
			<h2>Categories</h2>
			<ul id="categories">
			</ul>
		</div>

		<div class="sub">
			<h2>Tags</h2>
			<ul id="tags">
			
			</ul>
		</div>
		
		<div class="ad">{% show_ad std180x150 "rightbar_slot2" %}</div>
	</div>
	
</div>
</div>

{% endblock %}
